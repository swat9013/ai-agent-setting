# Context Update Command

このセッションを振り返り、コンテキストを更新してください。

## 実行手順

### Step 1: 抽出
この会話から保存すべき内容を特定：
- 新しく学んだこと
- 設計判断とその理由
- 踏んだ落とし穴・注意点

### Step 2: 整合性チェック
既存コンテキストとの確認：
- 矛盾する記述がないか
- 重複する内容がないか
- 古くなった情報がないか

### Step 3: 圧縮判断
context.md の現在の行数を確認：
- 200行以下 → そのまま追記
- 200行超 → 追記前に圧縮を実施

### Step 4: 保存先の判断

| 種類 | 保存先 |
|-----|-------|
| プロジェクト全般のルール | .ai/context.md |
| 設計判断とその理由 | docs/decisions/xxx.md |
| 詳細なガイドライン | docs/guidelines/xxx.md |
| 専門ワークフロー | .ai/agents/xxx.md |

## 圧縮方針（必要な場合）

1. **重複の統合**: 同じ内容を1つに
2. **参照化**: 詳細すぎる記述は docs/ へ分離し参照に置換
3. **削除**: 古くなった情報

## 出力形式

### 1. 変更サマリー
- 追加: [件数]
- 修正: [件数]
- 削除: [件数]
- 圧縮: [実施した/不要]

### 2. 更新内容

#### context.md
[変更後の全文、または差分]

#### その他のファイル（必要な場合）
- ファイルパス: [パス]
- 内容: [追記内容]

## 注意事項
- 適切な抽象度を保つ（硬直的すぎず、曖昧すぎず）
- 重要な情報は必ず保持（削除より分離を優先）
- 分離した情報は参照リンクを残す
