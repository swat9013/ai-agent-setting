---
type: command
name: debug
description: バグ調査を支援し、根本原因の特定と修正案を提示する
usage:
  - /debug TypeError: Cannot read property 'x' of undefined
  - /debug ログイン後にセッションが切れる問題
  - /debug logs/error.log
---
# Debug Command

バグ調査を支援し、根本原因の特定と修正案を提示する。

## 使用方法

```bash
/debug TypeError: Cannot read property 'x' of undefined
/debug ログイン後にセッションが切れる問題
/debug logs/error.log
```

## 処理フロー

### 1. 状況把握

- エラーメッセージ/スタックトレース分析
- 再現手順、発生頻度、影響範囲

### 2. 原因特定

- エラー発生箇所と関連コード調査
- 仮説立案（直接原因 → 根本原因）
- ログ/デバッガで検証

### 3. 対応判定

| 種別                                 | 対応                 |
| ------------------------------------ | -------------------- |
| 単純バグ（タイポ、null未チェック等） | 即修正 + テスト追加  |
| 技術的負債（設計欠陥）               | パッチ + docs/に記録 |

## 出力形式

```markdown
# デバッグレポート

## 問題: [症状]
## 原因: 直接=[X]、根本=[Y]
## 判定: [単純バグ/技術的負債]

## 修正案
[具体的な修正内容]

## テスト追加
[追加すべきテストケース]

## 次のアクション
1. [ステップ]
```

## よくあるパターン

| エラー         | 原因               | 確認         |
| -------------- | ------------------ | ------------ |
| null/undefined | 初期化漏れ、非同期 | データフロー |
| 型エラー       | 型変換、API応答    | 入出力の型   |
| N+1            | eager loading不足  | クエリログ   |

調査原則: 5 Whys、仮説駆動、最小再現
