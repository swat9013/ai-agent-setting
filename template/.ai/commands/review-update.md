---
type: command
name: review-update
description: コードレビューの学びをチェックリスト・コマンドに反映
usage:
  - /review-update
---

# Review Update Command

コードレビューセッションを振り返り、チェックリスト・コマンドを改善する。

## 対象ファイル

- `.ai/references/checklists/code-review.md` - チェック項目
- `.ai/commands/code-review.md` - レビューフロー

## 前提条件

以下を確認してから実行。満たさない場合は中止し理由を報告:

1. コードレビューセッションが直前に実施された
2. `.ai/references/checklists/code-review.md` が存在する
3. 保存すべき学びがセッション内に存在する

## 実行手順

### 1. 抽出
セッションから保存すべき内容を特定：
- 新しいチェック観点（セキュリティ、パフォーマンス等）
- 有効だったパターン・アンチパターンの例
- 繰り返し指摘した問題
- レビューフローの改善点

### 2. 整合性チェック
- 既存項目との矛盾・重複がないか確認
- 優先度（Critical/High/Medium/Low）の妥当性確認

### 3. 規模チェック
```bash
python3 .ai/scripts/measure-context.py --references
```
閾値超過時は追記前に圧縮。

### 4. 保存先判断

| 種類 | 保存先 |
|-----|-------|
| チェック項目・パターン例 | .ai/references/checklists/code-review.md |
| レビューフロー・出力形式 | .ai/commands/code-review.md |

### 5. 同期
```bash
python3 .ai/scripts/sync-context.py
```

## 圧縮方針
1. 重複統合（類似チェック項目をまとめる）
2. 表現簡潔化
3. 頻出項目は優先度を上げる
4. 有効でないパターン例は削除

## 出力形式
```
### 変更サマリー
- チェックリスト: 追加X件、修正X件、削除X件
- コマンド: 追加/修正/変更なし
- 圧縮: 実施/不要

### 更新内容
[差分または追加項目]
```

## 成功基準

このコマンドの実行は以下を満たしたとき成功とみなす:

1. レビューで得た学びが次回以降のレビューで活用できる形で保存されている
2. 追加項目が具体的で検証可能（Good/Bad例を含む）
3. チェックリストが閾値内に収まっている

## 完了チェックリスト

結果報告前に以下をすべて確認。未達成項目があれば修正してから報告:

- [ ] 前提条件をすべて満たした
- [ ] 追加項目が具体的で検証可能
- [ ] 既存項目との矛盾・重複がない
- [ ] 優先度が適切に設定されている
- [ ] 規模チェックを実行し閾値内
- [ ] 出力形式に従っている

## 原則

- 具体的な修正例（Good/Bad）を重視
- 実践に必要な知識のみ記載（歴史的経緯や比較用の対立概念は不要）
- プロジェクト固有すぎる項目は context.md へ
- 汎用的なベストプラクティスをチェックリストへ

## 関連

- `/code-review` - コードレビュー実行
