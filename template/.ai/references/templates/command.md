# コマンド作成テンプレート

新しいコマンドを作成する際のテンプレート。

## 構造

```markdown
---
type: command
name: command-name
description: コマンドの目的を1行で
usage:
  - /command-name arg1
  - /command-name arg2
---
# Command Name

コマンドの目的を簡潔に説明。

## 使用方法

\`\`\`bash
/command-name arg1   # 説明
/command-name arg2   # 説明
\`\`\`

## 前提条件

以下を確認してから実行。満たさない場合は中止し理由を報告:

1. [必須の前提条件1]
2. [必須の前提条件2]

## 実行手順

### 1. [ステップ名]
- 具体的なアクション
- 不明点があれば `[NEEDS CLARIFICATION: 質問]` を挿入（最大3箇所）

### 2. [ステップ名]
- 具体的なアクション

### 3. 結果出力
- 下記の出力形式に従って報告

## 出力形式

\`\`\`markdown
# [タイトル]

## [セクション]
[内容]
\`\`\`

## 完了チェックリスト

結果報告前に以下をすべて確認。未達成項目があれば修正してから報告:

- [ ] 前提条件をすべて満たした
- [ ] [コマンド固有のチェック項目]
- [ ] 出力形式に従っている

## 原則

- [このコマンドの原則・注意点]
```

## 必須要素

| 要素 | 目的 |
|-----|------|
| YAML frontmatter | メタデータ（name, description, usage） |
| 前提条件 | 実行前の検証、失敗時は中止 |
| 番号付き実行手順 | 順序の明確化、確実な実行 |
| 出力形式 | 一貫した結果報告 |
| 完了チェックリスト | 自己検証、品質担保 |

## 設計原則

### 前提条件
- 実行に必要な最小限の条件を列挙
- 満たさない場合は**中止**し理由を報告（黙って続行しない）

### 実行手順
- 番号付きで順序を明確化
- 各ステップは具体的なアクションを含む
- 曖昧な場合は `[NEEDS CLARIFICATION: 質問]` を使用（最大3箇所）

### 完了チェックリスト
- 報告前の自己検証（"英語のユニットテスト"）
- 未達成項目があれば**修正してから報告**
- 最大3回リトライ、それでも解決しない場合はユーザーに警告

## 例: Bad vs Good

### Bad: 曖昧な指示
```markdown
## 手順
- コードを確認する
- 問題があれば報告する
```

### Good: 具体的な指示
```markdown
## 前提条件
以下を確認してから実行。満たさない場合は中止し理由を報告:
1. 対象ファイルが存在する
2. `.ai/context.md` が読み込み可能

## 実行手順
### 1. 対象特定
- 引数がファイルパス → そのファイルを対象
- 引数なし → 現在のブランチの差分を対象

### 2. コード確認
- 命名規約の遵守をチェック
- エラーハンドリングの適切さをチェック

## 完了チェックリスト
- [ ] 前提条件をすべて満たした
- [ ] 各指摘に具体的な修正案を記載した
```
