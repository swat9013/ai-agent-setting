# AI Context Template

## プロジェクト概要

AIコーディングアシスタント（Cursor、Claude Code、GitHub Copilot等）向けの
コンテキスト管理テンプレート。プロジェクトに導入して使う。

## リポジトリ構造

```
├── template/          # 配布される本体（ここを編集）
├── docs/              # 設計書・ガイド
├── examples/          # 技術スタック別サンプル
├── install.sh         # インストーラー
└── CHANGELOG.md       # 変更履歴（リリース時に更新必須）
```

## 開発方針

### コンテキスト設計の原則
- 最小限の高シグナル情報で効果を最大化
- 適切な抽象度を保つ（硬直的すぎず、曖昧すぎず）
- 詳細リンクは「分離した場合のみ」追加（デフォルトで書かない）
  - 全セクションにリンクがあるとAIが無駄に探索する
- 分量が少なく常に参照されるべき内容は分離せず統合する
  - ファイル分離 → 参照 → 読み込みのオーバーヘッドを避ける

### ファイル編集時の注意

| ファイル | 注意点 |
|---------|--------|
| template/.ai/context.md | 穴埋め形式を維持。具体的すぎる例は避ける |
| template/.ai/agents/*.md | 対話向け（設計相談等）のみ。アクション実行はコマンドへ |
| template/.ai/commands/*.md | ツール非依存を維持。1:1対応ならエージェントと統合 |
| template/.ai/references/ | チェックリスト・テンプレート等の参照用ファイル |
| template/.ai/scripts/*.py | Python 3 標準ライブラリのみ使用（追加インストール不要） |
| examples/**/context.md | 実際に使える具体例を記載 |
| plan.md | 一時ファイル。docs/やwork/に保存しない。プロジェクトルートに配置し実装後削除 |

### エージェント vs コマンドの使い分け

| 種類 | 用途 | 例 |
|-----|------|-----|
| エージェント | 対話・相談向け | architect（設計相談） |
| コマンド | アクション実行 | /code-review（レビュー実行） |

**判断基準**: 1:1対応ならコマンドに統合してシンプルに保つ

### 破壊的変更の定義
- template/ のディレクトリ構造変更
- コマンド名の変更
- 必須ファイルの追加・削除

## リリース手順

1. CHANGELOG.md を更新
2. バージョンタグを作成: `git tag v1.x.x`
3. プッシュ: `git push origin v1.x.x`

## 開発ツール

### コンテキスト規模の計測

```bash
python3 template/.ai/scripts/measure-context.py
```

コンテキストファイルの行数・トークン数を計測。閾値超過をチェック。

| オプション | 対象 | 閾値（トークン: 推奨/上限） |
|-----------|------|---------------------------|
| --context | .ai/context.md | 1,500 / 2,000 |
| --agents | .ai/agents/*.md | 3,000 / 5,000 |
| --commands | .ai/commands/*.md | 1,500 / 2,000 |
| --references | .ai/references/**/*.md | 3,000 / 5,000 |
| --docs | docs/**/*.md | 3,000 / 5,000 |

## よくある改善パターン

- 新しい技術スタックの examples/ 追加
- コマンドテンプレートの改善
- スクリプトのバグ修正・機能追加
- ドキュメントの明確化
